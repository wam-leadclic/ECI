<?xml version="1.0" encoding="UTF-8"?>
<DuplicateRule xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionOnInsert>Block</actionOnInsert>
    <actionOnUpdate>Block</actionOnUpdate>
    <alertText>El registro ya existe en el sistema. Se han creado los miembros de campaña correctamente a no ser que el Lead o Cliente que está en el sistema esté registrado cómo fraudulento. (DuplicateFound:01)</alertText>
    <description>Duplicate Rule for Leads using the CESS Lead Matching Rule</description>
    <duplicateRuleFilter>
        <booleanFilter>4 and 5 and (1 or 6 or 7 or (2 and 3))</booleanFilter>
        <duplicateRuleFilterItems>
            <field>Email</field>
            <operation>notEqual</operation>
            <value></value>
            <sortOrder>1</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>DocumentTypeAUX__c</field>
            <operation>notEqual</operation>
            <value></value>
            <sortOrder>2</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>document_number__c</field>
            <operation>notEqual</operation>
            <value></value>
            <sortOrder>3</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>RecordType</field>
            <operation>equals</operation>
            <value>VTDVD - Lead Default, CESS - Lead Default</value>
            <sortOrder>4</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>IsConverted</field>
            <operation>equals</operation>
            <value>false</value>
            <sortOrder>5</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>Phone</field>
            <operation>notEqual</operation>
            <value></value>
            <sortOrder>6</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
        <duplicateRuleFilterItems>
            <field>MobilePhone</field>
            <operation>notEqual</operation>
            <value></value>
            <sortOrder>7</sortOrder>
            <table>Lead</table>
        </duplicateRuleFilterItems>
    </duplicateRuleFilter>
    <duplicateRuleMatchRules>
        <matchRuleSObjectType>Lead</matchRuleSObjectType>
        <matchingRule>leadsDuplicados</matchingRule>
        <objectMapping xsi:nil="true"/>
    </duplicateRuleMatchRules>
    <duplicateRuleMatchRules>
        <matchRuleSObjectType>PersonAccount</matchRuleSObjectType>
        <matchingRule>PersonAccountDuplicate</matchingRule>
        <objectMapping>
            <inputObject>Lead</inputObject>
            <mappingFields>
                <inputField>MobilePhone</inputField>
                <outputField>PersonMobilePhone</outputField>
            </mappingFields>
            <mappingFields>
                <inputField>document_number__c</inputField>
                <outputField>personal_document__pc</outputField>
            </mappingFields>
            <mappingFields>
                <inputField>Phone</inputField>
                <outputField>Phone</outputField>
            </mappingFields>
            <mappingFields>
                <inputField>DocumentTypeAUX__c</inputField>
                <outputField>TipoDocumentoAUX__pc</outputField>
            </mappingFields>
            <mappingFields>
                <inputField>Email</inputField>
                <outputField>PersonEmail</outputField>
            </mappingFields>
            <outputObject>PersonAccount</outputObject>
        </objectMapping>
    </duplicateRuleMatchRules>
    <isActive>true</isActive>
    <masterLabel>CESS Lead Duplicate Rule</masterLabel>
    <securityOption>BypassSharingRules</securityOption>
    <sortOrder>3</sortOrder>
</DuplicateRule>
